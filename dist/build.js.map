{"version":3,"sources":["webpack://VueKeybindings/webpack/universalModuleDefinition","webpack://VueKeybindings/webpack/bootstrap","webpack://VueKeybindings/./src/Emitter.js","webpack://VueKeybindings/./src/Main.js","webpack://VueKeybindings/./src/Observer.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_class","_classCallCheck","this","listeners","Map","_createClass","label","callback","vm","has","set","unshift","index","length","reduce","listener","splice","string","replace","g","toUpperCase","kebabToCamel","_len","arguments","args","Array","_key","_listener$callback","apply","concat","install","app","options","observer","Observer","config","globalProperties","$shortcut","mixin","created","_this","shortcuts","$options","Proxy","target","Emitter","addListener","deleteProperty","removeListener","keys","forEach","beforeDestroy","_this2","_Emitter","alias","add","onEvent","emit","shortcut","buildKey","labels","camelLabel","indexOf","push","delete","clear","document","addEventListener","event","onKeydown","buildShortcut","split","join","k","shiftKey","ctrlKey","metaKey","altKey","test","toLowerCase"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,UAAAH,GACA,iBAAAC,QACAA,QAAA,eAAAD,IAEAD,EAAA,eAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAT,YAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,sVClFe,eACb,SAAAC,iGAAeC,CAAAC,KAAAF,GACbE,KAAKC,UAAY,IAAIC,IAFV,OAAAC,EAAAL,IAAAT,IAAA,cAAAN,MAAA,SAKAqB,EAAOC,EAAUC,GAC5B,MAAwB,mBAAbD,IACTL,KAAKC,UAAUM,IAAIH,IAAUJ,KAAKC,UAAUO,IAAIJ,MAChDJ,KAAKC,UAAUtB,IAAIyB,GAAOK,SAAUJ,SAAUA,EAAUC,GAAIA,KAErD,MAVEjB,IAAA,iBAAAN,MAAA,SAgBGqB,EAAOC,EAAUC,GAC/B,IAAIL,EAAYD,KAAKC,UAAUtB,IAAIyB,GACjCM,SAEF,SAAIT,GAAaA,EAAUU,SACzBD,EAAQT,EAAUW,OAAO,SAAC9C,EAAG+C,EAAUH,GACrC,MAAoC,mBAAtBG,EAASR,UACrBQ,EAASR,WAAaA,GACtBQ,EAASP,KAAOA,EACbxC,EAAI4C,EACL5C,IACF,KAES,KACXmC,EAAUa,OAAOJ,EAAO,GACxBV,KAAKC,UAAUO,IAAIJ,EAAOH,IACnB,MAhCAZ,IAAA,eAAAN,MAAA,SAsCCgC,GACZ,OAAOA,EAAOC,QAAQ,YAAa,SAAAC,GAAA,OAAKA,EAAE,GAAGC,mBAvClC7B,IAAA,OAAAN,MAAA,SA0CPqB,GACJ,IAAIH,EAAYD,KAAKC,UAAUtB,IAAIqB,KAAKmB,aAAaf,IAErD,GAAIH,GAAaA,EAAUU,OAAQ,SAAAS,EAAAC,UAAAV,OAHrBW,EAGqBC,MAAAH,EAAA,EAAAA,EAAA,KAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAHrBF,EAGqBE,EAAA,GAAAH,UAAAG,GACjC,IAAK,IAAId,EAAQ,EAAGA,EAAQT,EAAUU,OAAQD,IAAS,KAAAe,EAC/CZ,EAAWZ,EAAUS,GAC3B,IAAqD,KAAjDe,EAAAZ,EAASR,UAASpC,KAAlByD,MAAAD,GAAuBZ,EAASP,IAAhCqB,OAAuCL,IACzC,OAAO,QAjDFxB,EAAA,mHCAf,QAAAlC,EAAA,QACAA,EAAA,kEAGEgE,QADa,SACJC,EAAKC,GACPA,IACHA,MAEF,IAAMC,EAAW,IAAIC,UAASF,GAC9BD,EAAII,OAAOC,iBAAiBC,UAAYJ,EAExCF,EAAIO,OACFC,QADQ,WACG,IAAAC,EAAAtC,KAELuC,EAAYvC,KAAKwC,SAAL,UAEhBxC,KAAKwC,SAASD,UAAY,IAAIE,UAG1BjC,IAAK,SAACkC,EAAQrD,EAAKN,GAGjB,OAFA4D,UAAQC,YAAYvD,EAAKN,EAAOuD,GAChCI,EAAOrD,GAAON,GACP,GAET8D,eAAgB,SAACH,EAAQrD,GAGvB,OAFAsD,UAAQG,eAAezD,EAAKiD,EAAKE,SAASD,UAAUlD,GAAMiD,UACnDI,EAAOrD,KACP,KAKTkD,GAEF/D,OAAOuE,KAAKR,GAAWS,QAAQ,SAAA3D,GAC7BiD,EAAKE,SAASD,UAAUlD,GAAOkD,EAAUlD,MAI/C4D,cA5BQ,WA4BS,IAAAC,EAAAlD,KACXuC,EAAYvC,KAAKwC,SAAL,UAEZD,GACF/D,OAAOuE,KAAKR,GAAWS,QAAQ,SAAA3D,UACtB6D,EAAKV,SAASD,UAAUlD,oVC5C3C8D,EAAAvF,EAAA,wDAGE,SAAAkC,EAAagC,GAAS,IAAAQ,EAAAtC,kGAAAD,CAAAC,KAAAF,GACpBE,KAAKuC,UAAY,IAAIrC,IACrB,IAAMkD,EAAQtB,EAAQsB,UACtB5E,OAAOuE,KAAKK,GAAOJ,QAAQ,SAAA5C,GACzBkC,EAAKe,IAAIjD,EAAO0B,EAAQsB,MAAMhD,MAEhCJ,KAAKsD,mDAGQ,QAAAlC,EAAAC,UAAAV,OAANW,EAAMC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAANF,EAAME,GAAAH,UAAAG,GACb,OAAOmB,UAAQY,KAAK7B,MAAMiB,UAASrB,+BAGhClB,EAAOoD,GACV,IAAMnE,EAAMW,KAAKyD,SAASD,GAC1BxD,KAAKuC,UAAUhC,IAAIlB,IAAQW,KAAKuC,UAAU/B,IAAInB,MAC9C,IAAMqE,EAAS1D,KAAKuC,UAAU5D,IAAIU,GAC5BsE,EAAahB,UAAQxB,aAAaf,IAEzB,IADDsD,EAAOE,QAAQD,IAE3BD,EAAOG,KAAKF,kCAIRvD,EAAOoD,GACb,IAAMnE,EAAMW,KAAKyD,SAASD,GACpBE,EAAS1D,KAAKuC,UAAU5D,IAAIU,OAC5BsE,EAAahB,UAAQxB,aAAaf,GAClCM,EAAQgD,EAAOE,QAAQD,GACzBjD,GAAS,IACXgD,EAAO5C,OAAOJ,EAAO,GACC,IAAlBgD,EAAO/C,QACTX,KAAKuC,UAAUuB,OAAOzE,mCAKpBmE,GACN,IAAMnE,EAAMW,KAAKyD,SAASD,GAC1B,OAAOxD,KAAKuC,UAAUuB,OAAOzE,mCAI7BW,KAAKuC,UAAUwB,0CAGN,IAAAb,EAAAlD,KACTgE,SAASC,iBAAiB,UAAW,SAAAC,IACI,IAAnCvB,UAAQY,KAAK,UAAWW,IAC1BhB,EAAKiB,UAAUD,uCAKVA,GAGT,IAFA,IAAM7E,EAAMW,KAAKoE,cAAcF,GACzBR,EAAS1D,KAAKuC,UAAU5D,IAAIU,OACzBqB,EAAQ,EAAGA,EAAQgD,EAAO/C,OAAQD,IAAS,CAClD,IAAMN,EAAQsD,EAAOhD,GACrB,IAAmC,IAA/BiC,UAAQY,KAAKnD,EAAO8D,GACtB,wCAKIV,GACR,OAA4B,iBAAbA,EAAwBA,EAASa,MAAM,KAAOb,GAAUc,KAAK,0CAG/DJ,GACb,IAAIK,EAAI,GAwDR,OAvDkB,UAAdL,EAAM7E,KAAmB6E,EAAMM,YACjCD,GAAK,UAEW,YAAdL,EAAM7E,KAAqB6E,EAAMO,WACnCF,GAAK,SAEW,SAAdL,EAAM7E,KAAkB6E,EAAMQ,WAChCH,GAAK,SAEW,QAAdL,EAAM7E,KAAiB6E,EAAMS,UAC/BJ,GAAK,OAEW,YAAdL,EAAM7E,MACRkF,GAAK,WAEW,cAAdL,EAAM7E,MACRkF,GAAK,aAEW,eAAdL,EAAM7E,MACRkF,GAAK,cAEW,cAAdL,EAAM7E,MACRkF,GAAK,aAEW,aAAdL,EAAM7E,MACRkF,GAAK,YAEW,WAAdL,EAAM7E,MACRkF,GAAK,OAEW,UAAdL,EAAM7E,MACRkF,GAAK,SAEW,QAAdL,EAAM7E,MACRkF,GAAK,OAEW,MAAdL,EAAM7E,MACRkF,GAAK,SAEW,WAAdL,EAAM7E,MACRkF,GAAK,UAEW,aAAdL,EAAM7E,MACRkF,GAAK,YAEW,SAAdL,EAAM7E,MACRkF,GAAK,QAEW,QAAdL,EAAM7E,MACRkF,GAAK,QAGJL,EAAM7E,KAAqB,MAAd6E,EAAM7E,KAAoC,IAArB6E,EAAM7E,IAAIsB,QAC7C,YAAYiE,KAAKV,EAAM7E,QACrBkF,GAAKL,EAAM7E,IAAIwF,eACZN","file":"build.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueKeybindings\"] = factory();\n\telse\n\t\troot[\"VueKeybindings\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export default new class {\n  constructor () {\n    this.listeners = new Map()\n  }\n\n  addListener (label, callback, vm) {\n    if (typeof callback === 'function') {\n      this.listeners.has(label) || this.listeners.set(label, [])\n      this.listeners.get(label).unshift({ callback: callback, vm: vm })\n\n      return true\n    }\n\n    return false\n  }\n\n  removeListener (label, callback, vm) {\n    let listeners = this.listeners.get(label),\n      index\n\n    if (listeners && listeners.length) {\n      index = listeners.reduce((i, listener, index) => {\n        return typeof listener.callback === 'function' &&\n          listener.callback === callback &&\n          listener.vm === vm\n          ? (i = index)\n          : i\n      }, -1)\n\n      if (index > -1) {\n        listeners.splice(index, 1)\n        this.listeners.set(label, listeners)\n        return true\n      }\n    }\n    return false\n  }\n\n  kebabToCamel (string) {\n    return string.replace(/-([a-z])/g, g => g[1].toUpperCase())\n  }\n\n  emit (label, ...args) {\n    let listeners = this.listeners.get(this.kebabToCamel(label))\n\n    if (listeners && listeners.length) {\n      for (let index = 0; index < listeners.length; index++) {\n        const listener = listeners[index]\n        if (listener.callback.call(listener.vm, ...args) === false) {\n          return false\n        }\n      }\n    }\n  }\n}()\n","import Observer from './Observer'\nimport Emitter from './Emitter'\n\nexport default {\n  install (app, options) {\n    if (!options) {\n      options = {}\n    }\n    const observer = new Observer(options)\n    app.config.globalProperties.$shortcut = observer\n\n    app.mixin({\n      created () {\n        // save current methods\n        let shortcuts = this.$options['shortcuts']\n\n        this.$options.shortcuts = new Proxy(\n          {},\n          {\n            set: (target, key, value) => {\n              Emitter.addListener(key, value, this)\n              target[key] = value\n              return true\n            },\n            deleteProperty: (target, key) => {\n              Emitter.removeListener(key, this.$options.shortcuts[key], this)\n              delete target.key\n              return true\n            }\n          }\n        )\n\n        if (shortcuts) {\n          // restore current methods\n          Object.keys(shortcuts).forEach(key => {\n            this.$options.shortcuts[key] = shortcuts[key]\n          })\n        }\n      },\n      beforeDestroy () {\n        let shortcuts = this.$options['shortcuts']\n\n        if (shortcuts) {\n          Object.keys(shortcuts).forEach(key => {\n            delete this.$options.shortcuts[key]\n          })\n        }\n      }\n    })\n  }\n}\n","import Emitter from './Emitter'\n\nexport default class {\n  constructor (options) {\n    this.shortcuts = new Map()\n    const alias = options.alias || {}\n    Object.keys(alias).forEach(label => {\n      this.add(label, options.alias[label])\n    })\n    this.onEvent()\n  }\n\n  emit (...args) {\n    return Emitter.emit.apply(Emitter, args)\n  }\n\n  add (label, shortcut) {\n    const key = this.buildKey(shortcut)\n    this.shortcuts.has(key) || this.shortcuts.set(key, [])\n    const labels = this.shortcuts.get(key)\n    const camelLabel = Emitter.kebabToCamel(label)\n    const index = labels.indexOf(camelLabel)\n    if (index === -1) {\n      labels.push(camelLabel)\n    }\n  }\n\n  remove (label, shortcut) {\n    const key = this.buildKey(shortcut)\n    const labels = this.shortcuts.get(key) || []\n    const camelLabel = Emitter.kebabToCamel(label)\n    const index = labels.indexOf(camelLabel)\n    if (index > -1) {\n      labels.splice(index, 1)\n      if (labels.length === 0) {\n        this.shortcuts.delete(key)\n      }\n    }\n  }\n\n  unbind (shortcut) {\n    const key = this.buildKey(shortcut)\n    return this.shortcuts.delete(key)\n  }\n\n  clear () {\n    this.shortcuts.clear()\n  }\n\n  onEvent () {\n    document.addEventListener('keydown', event => {\n      if (Emitter.emit('keydown', event) !== false) {\n        this.onKeydown(event)\n      }\n    })\n  }\n\n  onKeydown (event) {\n    const key = this.buildShortcut(event)\n    const labels = this.shortcuts.get(key) || []\n    for (let index = 0; index < labels.length; index++) {\n      const label = labels[index]\n      if (Emitter.emit(label, event) === false) {\n        break\n      }\n    }\n  }\n\n  buildKey (shortcut) {\n    return (typeof shortcut === 'string' ? shortcut.split('+') : shortcut).join('')\n  }\n\n  buildShortcut (event) {\n    let k = ''\n    if (event.key === 'Shift' || event.shiftKey) {\n      k += 'shift'\n    }\n    if (event.key === 'Control' || event.ctrlKey) {\n      k += 'ctrl'\n    }\n    if (event.key === 'Meta' || event.metaKey) {\n      k += 'meta'\n    }\n    if (event.key === 'Alt' || event.altKey) {\n      k += 'alt'\n    }\n    if (event.key === 'ArrowUp') {\n      k += 'arrowup'\n    }\n    if (event.key === 'ArrowLeft') {\n      k += 'arrowleft'\n    }\n    if (event.key === 'ArrowRight') {\n      k += 'arrowright'\n    }\n    if (event.key === 'ArrowDown') {\n      k += 'arrowdown'\n    }\n    if (event.key === 'AltGraph') {\n      k += 'altgraph'\n    }\n    if (event.key === 'Escape') {\n      k += 'esc'\n    }\n    if (event.key === 'Enter') {\n      k += 'enter'\n    }\n    if (event.key === 'Tab') {\n      k += 'tab'\n    }\n    if (event.key === ' ') {\n      k += 'space'\n    }\n    if (event.key === 'PageUp') {\n      k += 'pageup'\n    }\n    if (event.key === 'PageDown') {\n      k += 'pagedown'\n    }\n    if (event.key === 'Home') {\n      k += 'home'\n    }\n    if (event.key === 'End') {\n      k += 'end'\n    }\n    if (\n      (event.key && event.key !== ' ' && event.key.length === 1) ||\n      /F\\d{1,2}/g.test(event.key)\n    ) { k += event.key.toLowerCase() }\n    return k\n  }\n}\n"],"sourceRoot":""}